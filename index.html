<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Scatter Unlimited Kolom & Kalkulator Credit</title>
<!-- Favicon dadu dalam format base64 -->
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸŽ²</text></svg>">
<!-- Font Awesome untuk ikon -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
:root {
--primary-color: #4caf50;
--primary-dark: #388e3c;
--primary-darker: #2e7d32;
--primary-light: #81c784;
--primary-lighter: #1a3b1c;
--text-primary: #f0f0f0;
--text-secondary: #b0b0b0;
--bg-primary: #0a0e12;
--bg-secondary: #151a21;
--bg-card: #1d242e;
--border-color: #2a3542;
--success-color: #388e3c;
--success-bg: rgba(56, 142, 60, 0.2);
--shadow-color: rgba(0, 0, 0, 0.6);
--blue-color: #2196f3;
--blue-dark: #1976d2;
--blue-darker: #1565c0;
--blue-light: #64b5f6;
--blue-lighter: rgba(33, 150, 243, 0.1);
--blue-medium: rgba(33, 150, 243, 0.15);
--blue-strong: rgba(33, 150, 243, 0.2);
--delete-color: #f44336;
--warning-color: #ff9800;
--warning-light: #ffb74d;
--warning-bg: rgba(255, 152, 0, 0.1);
}

* {
margin: 0;
padding: 0;
box-sizing: border-box;
transition: all 0.3s ease;
}

body {
font-family: 'Inter', sans-serif;
color: var(--text-primary);
line-height: 1.6;
padding: 20px;
min-height: 100vh;
background-color: var(--bg-primary);
overflow-x: hidden;
background-image: url('https://cdn.areabermain.club/assets/cdn/az6/2025/12/10/20251210/7f0bdc56062fceb10a05b6412f5ce6e2/linetogel-bg-natal2025.webp');
background-size: cover;
background-position: center;
background-attachment: fixed;
position: relative;
font-weight: 500;
}

body::before {
content: '';
position: absolute;
top: 0;
left: 0;
width: 100%;
height: 100%;
background: rgba(10, 14, 18, 0.7);
z-index: -1;
}

.container {
max-width: 1600px;
margin: 0 auto;
padding: 0;
position: relative;
z-index: 1;
}

header {
text-align: center;
padding: 30px 20px;
margin-bottom: 20px;
position: relative;
}

header h1 {
font-size: 2.5rem;
font-weight: 800;
color: var(--blue-color);
margin-bottom: 10px;
position: relative;
display: inline-block;
text-shadow: 0 2px 10px rgba(0,0,0,0.5);
}

header h1::after {
content: '';
position: absolute;
bottom: -10px;
left: 50%;
transform: translateX(-50%);
width: 100px;
height: 4px;
background: linear-gradient(90deg, var(--blue-color), var(--blue-darker));
border-radius: 4px;
box-shadow: 0 2px 5px rgba(0,0,0,0.3);
}

header p {
color: var(--text-secondary);
max-width: 600px;
margin: 20px auto 0;
font-size: 1.1rem;
font-weight: 500;
}

.card {
background: var(--bg-card);
border-radius: 16px;
padding: 30px;
box-shadow: 0 15px 40px var(--shadow-color);
position: relative;
overflow: hidden;
margin-bottom: 30px;
border: 1px solid var(--border-color);
backdrop-filter: blur(8px);
-webkit-backdrop-filter: blur(8px);
}

h2 {
color: var(--blue-color);
margin: 0 0 25px;
font-weight: 700;
font-size: 1.7rem;
padding-bottom: 15px;
border-bottom: 2px solid var(--blue-dark);
text-shadow: 0 1px 3px rgba(0,0,0,0.3);
}

h3 {
color: var(--blue-light);
margin-bottom: 15px;
font-weight: 600;
font-size: 1.2rem;
padding-bottom: 10px;
}

/* Tab Container */
.tab-container {
display: flex;
margin-bottom: 25px;
border-bottom: 2px solid var(--border-color);
overflow-x: auto;
}

.tab-button {
padding: 12px 24px;
background: transparent;
border: none;
color: var(--text-secondary);
font-weight: 600;
cursor: pointer;
position: relative;
transition: all 0.3s ease;
font-size: 1rem;
border-radius: 8px 8px 0 0;
white-space: nowrap;
}

.tab-button.active {
color: var(--blue-color);
}

.tab-button.active::after {
content: '';
position: absolute;
bottom: -2px;
left: 0;
width: 100%;
height: 3px;
background: linear-gradient(90deg, var(--blue-color), var(--blue-darker));
border-radius: 3px;
}

.tab-content {
display: none;
}

.tab-content.active {
display: block;
}

/* STYLE UNTUK KALKULATOR CREDIT - DIKECILKAN */
.credit-calculator-container {
margin-top: 20px;
padding: 20px;
background: var(--bg-secondary);
border-radius: 12px;
border: 1px solid var(--border-color);
transform: scale(0.9);
transform-origin: top left;
width: 111%; /* Mengkompensasi scaling */
}

.credit-calculator-grid {
display: grid;
grid-template-columns: 1fr 1fr;
gap: 20px;
}

.credit-input-section {
grid-column: 1;
}

.credit-result-section {
grid-column: 2;
display: flex;
flex-direction: column;
justify-content: space-between;
}

#creditData {
min-height: 150px;
font-size: 0.85rem;
padding: 12px;
background-color: var(--bg-card);
color: var(--text-primary);
border: 1px solid var(--border-color);
border-radius: 8px;
resize: vertical;
width: 100%;
}

.credit-result-box {
background-color: var(--bg-card);
border: 1px solid var(--border-color);
border-radius: 10px;
padding: 15px;
height: 100%;
display: flex;
flex-direction: column;
}

.credit-result-header {
display: flex;
justify-content: space-between;
align-items: center;
margin-bottom: 10px;
padding-bottom: 8px;
border-bottom: 2px solid var(--blue-dark);
}

.credit-result-title {
color: var(--blue-color);
font-weight: 600;
font-size: 1rem;
}

.credit-total {
font-size: 1.3rem;
color: var(--blue-color);
font-weight: bold;
margin: 10px 0;
text-align: center;
padding: 10px;
background-color: rgba(33, 150, 243, 0.1);
border-radius: 8px;
border: 1px solid var(--blue-color);
}

.credit-action-buttons {
display: flex;
gap: 10px;
margin-top: auto;
}

.credit-btn {
flex: 1;
padding: 8px 12px;
border-radius: 6px;
font-size: 0.85rem;
display: flex;
align-items: center;
justify-content: center;
gap: 6px;
cursor: pointer;
transition: all 0.3s ease;
border: none;
font-weight: 600;
}

.credit-copy-btn {
background: var(--blue-color);
color: white;
}

.credit-copy-btn:hover {
background: var(--blue-dark);
transform: translateY(-2px);
box-shadow: 0 5px 15px rgba(33, 150, 243, 0.3);
}

.credit-clear-btn {
background: var(--delete-color);
color: white;
}

.credit-clear-btn:hover {
background: #d32f2f;
transform: translateY(-2px);
box-shadow: 0 5px 15px rgba(244, 67, 54, 0.3);
}

.copy-notification {
color: var(--blue-color);
font-size: 0.75rem;
margin-top: 8px;
text-align: center;
height: 18px;
}

.credit-description {
font-size: 0.85rem;
color: var(--text-secondary);
margin-bottom: 12px;
line-height: 1.5;
}

/* Toast Notification Styles */
#toast {
position: fixed;
bottom: 30px;
right: 30px;
background-color: var(--blue-color);
color: white;
padding: 12px 24px;
border-radius: 8px;
font-weight: 600;
font-size: 0.9rem;
box-shadow: 0 5px 15px var(--shadow-color);
z-index: 10000;
display: none;
align-items: center;
gap: 8px;
min-width: 200px;
text-align: center;
animation: toastSlideIn 0.3s ease-out, toastSlideOut 0.3s ease-in 1.7s forwards;
border-left: 4px solid var(--blue-dark);
}

#toast.error {
background-color: var(--delete-color);
border-left-color: #c62828;
}

@keyframes toastSlideIn {
from {
opacity: 0;
transform: translateX(100%);
}
to {
opacity: 1;
transform: translateX(0);
}
}

@keyframes toastSlideOut {
from {
opacity: 1;
transform: translateX(0);
}
to {
opacity: 0;
transform: translateX(100%);
}
}

/* Responsive styles untuk kalkulator credit */
@media (max-width: 992px) {
.credit-calculator-grid {
grid-template-columns: 1fr;
}

.credit-input-section,
.credit-result-section {
grid-column: 1;
}

.credit-result-box {
margin-top: 15px;
}
}

@media (max-width: 768px) {
.credit-calculator-container {
padding: 15px;
transform: scale(1);
width: 100%;
}

.credit-action-buttons {
flex-direction: column;
}

.credit-btn {
width: 100%;
}

/* Adjust toast for mobile */
#toast {
bottom: 20px;
right: 20px;
left: 20px;
min-width: auto;
}
}

/* STYLE LAINNYA YANG SUDAH ADA - Tetap sama seperti sebelumnya */
.input-wrapper {
position: relative;
margin-bottom: 20px;
}

textarea {
width: 100%;
min-height: 80px;
padding: 12px 40px 12px 12px;
border-radius: 12px;
border: 1px solid var(--border-color);
font-family: 'Inter', monospace;
font-size: 13px;
resize: vertical;
background-color: var(--bg-secondary);
color: var(--text-primary);
transition: all 0.3s ease;
box-shadow: inset 0 3px 6px rgba(0,0,0,0.3);
font-weight: 500;
}

textarea:focus {
outline: none;
border-color: var(--blue-color);
box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.3), inset 0 3px 6px rgba(0,0,0,0.3);
}

.action-buttons {
display: flex;
justify-content: flex-end;
gap: 15px;
margin-top: 20px;
}

.btn {
padding: 12px 24px;
border-radius: 10px;
cursor: pointer;
font-size: 15px;
font-weight: 600;
transition: all 0.3s ease;
display: flex;
align-items: center;
gap: 10px;
box-shadow: 0 5px 15px var(--shadow-color);
border: none;
}

.btn-clear {
background: linear-gradient(145deg, #f44336, #d32f2f);
color: white;
border: none;
}

.btn-clear:hover {
background: linear-gradient(145deg, #e53935, #c62828);
transform: translateY(-3px);
box-shadow: 0 8px 20px rgba(229, 57, 53, 0.3);
}

.result-container {
margin-top: 30px;
}

.six-columns-result {
margin-top: 25px;
}

.scatter-row {
display: flex;
flex-wrap: wrap;
gap: 12px;
margin-bottom: 20px;
justify-content: center; /* Default center untuk baris yang tidak penuh */
}

.scatter-row.full-row {
justify-content: space-between; /* Untuk baris penuh 6 kolom */
}

.column-result {
background-color: var(--bg-secondary);
border: 1px solid var(--border-color);
border-radius: 14px;
padding: 15px;
box-shadow: 0 8px 20px var(--shadow-color);
position: relative;
transition: all 0.4s ease;
display: block; /* Diubah dari none ke block agar kolom tetap tampil */
flex: 0 0 calc(16.666% - 10px); /* Lebar sekitar 1/6 dengan margin */
max-width: calc(16.666% - 10px);
}

.column-result.has-data {
background: var(--blue-lighter);
border-top: 4px solid var(--blue-color);
box-shadow: 0 8px 25px rgba(0, 0, 0, 0.7);
}

.column-result.cancelled {
opacity: 0.7;
background: rgba(255, 255, 255, 0.05);
border: 1px dashed var(--border-color);
}

.column-result.done {
background: rgba(56, 142, 60, 0.15);
border-color: var(--success-color);
box-shadow: 0 8px 20px rgba(56, 142, 60, 0.2);
}

.column-result.col1.has-data { border-top-color: var(--blue-color); }
.column-result.col2.has-data { border-top-color: var(--blue-color); }
.column-result.col3.has-data { border-top-color: var(--blue-color); }
.column-result.col4.has-data { border-top-color: var(--blue-color); }
.column-result.col5.has-data { border-top-color: var(--blue-color); }
.column-result.col6.has-data { border-top-color: var(--blue-color); }

.column-result h4 {
margin-bottom: 12px;
font-size: 1rem;
text-align: center;
padding-bottom: 8px;
border-bottom: 2px solid var(--blue-dark);
font-weight: 700;
color: var(--blue-light);
}

.column-result.has-data h4 {
font-weight: 800;
color: var(--blue-color);
}

.column-result.cancelled h4 {
color: var(--text-secondary);
}

.column-result.done h4 {
color: var(--success-color);
border-bottom-color: var(--success-color);
}

.column-result-item {
margin-bottom: 10px;
padding: 8px 10px;
background-color: var(--bg-card);
border-radius: 10px;
display: flex;
align-items: center;
position: relative;
box-shadow: 0 3px 8px var(--shadow-color);
border: 1px solid var(--border-color);
font-size: 0.85rem;
}

.column-result.has-data .column-result-item {
background-color: var(--blue-medium);
border-color: rgba(33, 150, 243, 0.3);
}

.column-result.cancelled .column-result-item {
background-color: rgba(255, 255, 255, 0.05);
border-color: rgba(255, 255, 255, 0.1);
}

.column-result.done .column-result-item {
background-color: rgba(56, 142, 60, 0.15);
border-color: rgba(56, 142, 60, 0.3);
}

.column-result-label {
font-weight: 700;
color: var(--blue-light);
font-size: 0.8rem;
margin-bottom: 3px;
flex: 1;
}

.column-result.has-data .column-result-label {
color: var(--blue-color);
}

.column-result.cancelled .column-result-label {
color: var(--text-secondary);
}

.column-result.done .column-result-label {
color: var(--success-color);
}

.column-result-value {
font-size: 0.8rem;
word-break: break-all;
font-family: 'Inter', monospace;
flex: 2;
color: var(--text-primary);
font-weight: 500;
}

.column-result.cancelled .column-result-value {
color: var(--text-secondary);
}

.column-result.done .column-result-value {
color: var(--text-primary);
font-weight: 500;
}

.column-btn-copy {
background-color: transparent;
color: var(--text-secondary);
border: none;
padding: 5px;
border-radius: 50%;
cursor: pointer;
width: 26px;
height: 26px;
display: flex;
align-items: center;
justify-content: center;
transition: all 0.3s ease;
flex-shrink: 0;
position: relative;
overflow: hidden;
margin-left: 6px;
}

.column-btn-copy:hover {
background-color: var(--blue-medium);
color: var(--blue-color);
transform: scale(1.1);
}

/* Tombol copy di kolom yang selesai */
.column-result.done .column-btn-copy {
opacity: 0.5;
cursor: not-allowed;
pointer-events: none;
}

.column-result.done .column-btn-copy:hover {
background-color: transparent;
color: var(--text-secondary);
transform: none;
}

.column-result-item.copied {
animation: highlightCopy 1.5s ease-out;
border-color: var(--blue-color);
}

@keyframes highlightCopy {
0% {
background-color: var(--bg-card);
box-shadow: 0 0 0 0 rgba(33, 150, 243, 0);
}
20% {
background-color: rgba(33, 150, 243, 0.1);
box-shadow: 0 0 10px 5px rgba(33, 150, 243, 0.2);
}
100% {
background-color: var(--bg-card);
box-shadow: 0 0 0 0 rgba(33, 150, 243, 0);
}
}

.view-image-btn {
background: var(--blue-medium);
color: var(--blue-color);
border: 1px solid var(--border-color);
border-radius: 10px;
padding: 8px 12px;
font-size: 0.85rem;
display: flex;
align-items: center;
justify-content: center;
gap: 6px;
cursor: pointer;
transition: all 0.3s ease;
width: 100%;
margin-top: 12px;
font-weight: 600;
}

.view-image-btn:hover {
background: var(--blue-strong);
transform: translateY(-3px);
box-shadow: 0 4px 12px rgba(33, 150, 243, 0.15);
border-color: var(--blue-color);
}

.done-btn {
background: linear-gradient(145deg, var(--blue-color), var(--blue-darker));
color: white;
border: none;
border-radius: 10px;
padding: 8px 12px;
font-size: 0.85rem;
display: flex;
align-items: center;
justify-content: center;
gap: 6px;
cursor: pointer;
transition: all 0.3s ease;
width: 100%;
margin-top: 10px;
font-weight: 700;
box-shadow: 0 4px 12px rgba(33, 150, 243, 0.3);
}

.done-btn:hover {
background: linear-gradient(145deg, var(--blue-dark), #0d47a1);
transform: translateY(-3px);
box-shadow: 0 6px 15px rgba(33, 150, 243, 0.4);
}

.done-btn.undo {
background: linear-gradient(145deg, #616161, #424242);
}

.done-btn.undo:hover {
background: linear-gradient(145deg, #757575, #616161);
}

.cancel-btn {
background: rgba(244, 67, 54, 0.15);
color: var(--delete-color);
border: 1px solid var(--border-color);
border-radius: 10px;
padding: 8px 12px;
font-size: 0.85rem;
display: flex;
align-items: center;
justify-content: center;
gap: 6px;
cursor: pointer;
transition: all 0.3s ease;
width: 100%;
margin-top: 8px;
font-weight: 600;
}

.cancel-btn:hover {
background: rgba(244, 67, 54, 0.25);
transform: translateY(-3px);
box-shadow: 0 4px 12px rgba(244, 67, 54, 0.15);
border-color: var(--delete-color);
}

.cancel-btn.undo {
background: var(--blue-medium);
color: var(--blue-color);
}

.cancel-btn.undo:hover {
background: var(--blue-strong);
border-color: var(--blue-color);
}

.link-preview-container {
display: flex;
gap: 5px;
justify-content: flex-end;
width: 100%;
align-items: center;
}

.link-placeholder {
display: flex;
align-items: center;
padding: 0 8px;
color: var(--text-secondary);
font-size: 0.85rem;
}

.modal {
display: none;
position: fixed;
z-index: 1000;
left: 0;
top: 0;
width: 100%;
height: 100%;
background-color: rgba(0, 0, 0, 0.95);
overflow: auto;
animation: fadeIn 0.3s;
}

.modal-content {
display: flex;
flex-direction: column;
justify-content: center;
align-items: center;
height: 100%;
padding: 20px;
position: relative;
}

.images-container {
display: flex;
flex-wrap: wrap;
justify-content: center;
gap: 20px;
max-width: 100%;
margin-top: 20px;
}

.modal-img {
max-width: 800px;
max-height: 900px;
object-fit: contain;
border: 3px solid var(--blue-color);
border-radius: 8px;
box-shadow: 0 0 20px rgba(33, 150, 243, 0.5);
transition: transform 0.3s ease;
cursor: zoom-in;
}

.modal-img.zoomed {
cursor: zoom-out;
transform: scale(1.5);
z-index: 1002;
position: relative;
}

.close-btn {
position: absolute;
top: 30px;
right: 40px;
color: var(--blue-color);
font-size: 45px;
font-weight: bold;
cursor: pointer;
transition: all 0.3s;
text-shadow: 0 0 15px rgba(0, 0, 0, 0.7);
z-index: 1001;
}

.close-btn:hover {
color: var(--blue-light);
transform: rotate(90deg);
}

.image-info {
position: absolute;
top: 30px;
left: 40px;
color: var(--blue-color);
font-size: 18px;
background-color: rgba(0, 0, 0, 0.7);
padding: 15px 25px;
border-radius: 30px;
z-index: 1001;
display: flex;
flex-direction: column;
align-items: flex-start;
gap: 5px;
max-width: 600px;
}

.image-detail {
font-size: 16px;
font-weight: 500;
display: flex;
align-items: center;
gap: 8px;
}

.image-detail i {
color: var(--blue-light);
min-width: 20px;
text-align: center;
}

@keyframes fadeIn {
from { opacity: 0; }
to { opacity: 1; }
}

@keyframes zoomIn {
from { transform: scale(0.8); opacity: 0; }
to { transform: scale(1); opacity: 1; }
}

/* Toggle TS Styles */
.ts-toggle-container {
display: flex;
align-items: center;
gap: 10px;
margin-bottom: 15px;
background: var(--bg-secondary);
padding: 10px 15px;
border-radius: 10px;
border: 1px solid var(--border-color);
}

.ts-toggle-label {
font-weight: 600;
color: var(--text-primary);
font-size: 0.95rem;
}

.ts-toggle {
position: relative;
display: inline-block;
width: 50px;
height: 24px;
}

.ts-toggle input {
opacity: 0;
width: 0;
height: 0;
}

.ts-toggle-slider {
position: absolute;
cursor: pointer;
top: 0;
left: 0;
right: 0;
bottom: 0;
background-color: var(--bg-card);
transition: .4s;
border-radius: 24px;
border: 1px solid var(--border-color);
}

.ts-toggle-slider:before {
position: absolute;
content: "";
height: 18px;
width: 18px;
left: 3px;
bottom: 2px;
background-color: var(--text-secondary);
transition: .4s;
border-radius: 50%;
}

input:checked + .ts-toggle-slider {
background-color: var(--blue-color);
}

input:checked + .ts-toggle-slider:before {
transform: translateX(26px);
background-color: white;
}

.result-header {
display: flex;
justify-content: space-between;
align-items: center;
margin-bottom: 25px;
padding-bottom: 15px;
border-bottom: 2px solid var(--blue-dark);
}

.result-header h2 {
margin-bottom: 0;
}

/* Styles untuk input otomatis - DIKECILKAN */
.auto-input-container {
margin-bottom: 25px;
transition: all 0.3s ease;
}

.auto-input-header {
display: flex;
align-items: center;
justify-content: space-between;
margin-bottom: 10px;
}

.auto-input-header h3 {
margin-bottom: 0;
display: flex;
align-items: center;
gap: 10px;
font-size: 1.1rem;
color: var(--blue-light);
}

.auto-input-header h3 i {
color: var(--blue-color);
}

.auto-input-info {
display: flex;
align-items: center;
gap: 10px;
color: var(--text-secondary);
font-size: 0.9rem;
}

.auto-input-info .count-badge {
background: var(--blue-color);
color: white;
padding: 3px 8px;
border-radius: 10px;
font-size: 0.8rem;
font-weight: 600;
}

.auto-input-container textarea {
min-height: 120px;
transition: all 0.3s ease;
}

.auto-input-actions {
display: flex;
justify-content: space-between;
align-items: center;
margin-top: 10px;
}

.auto-input-warning {
color: var(--warning-color);
font-size: 0.85rem;
font-weight: 500;
display: none;
align-items: center;
gap: 5px;
background: rgba(255, 152, 0, 0.1);
padding: 8px 12px;
border-radius: 8px;
border: 1px solid var(--warning-color);
}

.auto-input-error {
color: var(--delete-color);
font-size: 0.85rem;
font-weight: 500;
display: none;
align-items: center;
gap: 5px;
background: rgba(244, 67, 54, 0.1);
padding: 8px 12px;
border-radius: 8px;
border: 1px solid var(--delete-color);
}

.auto-delete-btn {
background: rgba(244, 67, 54, 0.15);
color: var(--delete-color);
border: 1px solid var(--border-color);
border-radius: 10px;
padding: 8px 15px;
font-size: 0.85rem;
display: flex;
align-items: center;
gap: 6px;
cursor: pointer;
transition: all 0.3s ease;
font-weight: 600;
}

.auto-delete-btn:hover {
background: rgba(244, 67, 54, 0.25);
transform: translateY(-3px);
box-shadow: 0 4px 12px rgba(244, 67, 54, 0.15);
border-color: var(--delete-color);
}

/* Styles untuk tombol navigasi kolom di modal */
.modal-navigation {
display: flex;
justify-content: center;
gap: 10px;
margin: 20px 0;
position: absolute;
bottom: 30px;
left: 0;
right: 0;
z-index: 1002;
overflow-x: auto;
padding: 10px 20px;
max-width: 90%;
margin-left: auto;
margin-right: auto;
flex-wrap: wrap;
}

.nav-btn {
width: 40px;
height: 40px;
border-radius: 50%;
border: 2px solid var(--blue-color);
background: rgba(10, 14, 18, 0.7);
color: var(--blue-color);
font-weight: bold;
cursor: pointer;
display: flex;
align-items: center;
justify-content: center;
transition: all 0.3s ease;
font-size: 16px;
box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
flex-shrink: 0;
}

.nav-btn:hover {
background: var(--blue-color);
color: white;
transform: scale(1.1);
}

.nav-btn.active {
background: var(--blue-color);
color: white;
transform: scale(1.1);
box-shadow: 0 0 15px rgba(33, 150, 243, 0.7);
}

.nav-btn:disabled {
opacity: 0.5;
cursor: not-allowed;
border-color: var(--text-secondary);
color: var(--text-secondary);
}

.nav-btn:disabled:hover {
background: rgba(10, 14, 18, 0.7);
color: var(--text-secondary);
transform: none;
}

/* Styles untuk kontrol zoom */
.zoom-controls {
position: absolute;
top: 30px;
right: 100px;
display: flex;
gap: 10px;
z-index: 1001;
}

.zoom-btn {
width: 40px;
height: 40px;
border-radius: 50%;
background: rgba(10, 14, 18, 0.7);
color: var(--blue-color);
border: 2px solid var(--blue-color);
display: flex;
align-items: center;
justify-content: center;
cursor: pointer;
transition: all 0.3s ease;
font-size: 18px;
box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
}

.zoom-btn:hover {
background: var(--blue-color);
color: white;
transform: scale(1.1);
}

.zoom-indicator {
position: absolute;
top: 80px;
right: 40px;
color: var(--blue-color);
font-size: 14px;
background: rgba(10, 14, 18, 0.7);
padding: 5px 10px;
border-radius: 20px;
z-index: 1001;
font-weight: 600;
display: none;
}

/* Responsive untuk kolom hasil */
@media (max-width: 1600px) {
.column-result {
flex: 0 0 calc(33.333% - 12px);
max-width: calc(33.333% - 12px);
}
}

@media (max-width: 1200px) {
.column-result {
flex: 0 0 calc(50% - 12px);
max-width: calc(50% - 12px);
}
}

@media (max-width: 992px) {
.column-result {
flex: 0 0 calc(50% - 12px);
max-width: calc(50% - 12px);
}
}

@media (max-width: 768px) {
.card {
padding: 25px 15px;
}

header {
padding: 20px 15px;
}

header h1 {
font-size: 2rem;
}

.column-result {
flex: 0 0 100%;
max-width: 100%;
}

.action-buttons {
flex-direction: column;
gap: 10px;
}

.btn {
width: 100%;
justify-content: center;
}

.close-btn {
top: 20px;
right: 25px;
font-size: 35px;
}

.image-info {
top: 20px;
left: 15px;
font-size: 14px;
padding: 10px 15px;
}

.modal-img {
max-width: 90%;
max-height: 400px;
}

.result-header {
flex-direction: column;
align-items: flex-start;
gap: 15px;
}

.auto-input-header {
flex-direction: column;
align-items: flex-start;
gap: 10px;
}

.auto-input-actions {
flex-direction: column;
gap: 10px;
align-items: flex-start;
}

.modal-navigation {
bottom: 20px;
max-width: 95%;
}

.nav-btn {
width: 35px;
height: 35px;
font-size: 14px;
}

.zoom-controls {
top: 20px;
right: 70px;
}

.zoom-btn {
width: 35px;
height: 35px;
font-size: 16px;
}

.zoom-indicator {
top: 65px;
right: 25px;
font-size: 12px;
}
}

/* ===== STYLE UNTUK TAB SHORTCUT HITUNG SCATTER ===== */
.perhitungan-container {
margin-top: 20px;
padding: 20px;
background: var(--bg-secondary);
border-radius: 12px;
border: 1px solid var(--border-color);
}

.perhitungan-title {
color: var(--blue-color);
font-weight: 700;
font-size: 1.2rem;
margin-bottom: 20px;
text-align: center;
padding-bottom: 10px;
border-bottom: 2px solid var(--blue-dark);
}

.input-row-container {
display: flex;
gap: 20px;
margin-bottom: 20px;
flex-wrap: wrap;
}

.input-kemenangan-container,
.saldo-kanan-container {
flex: 1;
min-width: 250px;
}

.input-kemenangan-title,
.saldo-kanan-title {
color: var(--blue-light);
font-weight: 600;
font-size: 1rem;
margin-bottom: 8px;
display: flex;
align-items: center;
gap: 8px;
}

.input-kemenangan-title i,
.saldo-kanan-title i {
color: var(--blue-color);
}

.kemenangan-input-group,
.saldo-kanan-input-group {
position: relative;
}

.kemenangan-input,
.saldo-kanan-input {
width: 100%;
padding: 12px 15px;
background-color: var(--bg-card);
color: var(--text-primary);
border: 1px solid var(--border-color);
border-radius: 8px;
font-size: 0.95rem;
transition: all 0.3s ease;
}

.kemenangan-input:focus,
.saldo-kanan-input:focus {
outline: none;
border-color: var(--blue-color);
box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.2);
}

.saldo-kanan-info {
color: var(--text-secondary);
font-size: 0.85rem;
margin-bottom: 25px;
text-align: center;
font-style: italic;
}

.contoh-gambar-container {
margin-top: 25px;
padding: 20px;
background: var(--bg-card);
border-radius: 10px;
border: 1px solid var(--blue-dark);
}

.contoh-gambar-title {
color: var(--blue-light);
font-weight: 600;
font-size: 1.1rem;
margin-bottom: 15px;
display: flex;
align-items: center;
gap: 10px;
}

.contoh-gambar-title i {
color: var(--blue-color);
}

.hasilkan-btn {
background: linear-gradient(145deg, var(--blue-color), var(--blue-darker));
color: white;
border: none;
border-radius: 10px;
padding: 12px 20px;
font-size: 0.95rem;
display: flex;
align-items: center;
justify-content: center;
gap: 8px;
cursor: pointer;
transition: all 0.3s ease;
width: 100%;
font-weight: 700;
margin-top: 15px;
box-shadow: 0 4px 12px rgba(33, 150, 243, 0.3);
}

.hasilkan-btn:hover {
background: linear-gradient(145deg, var(--blue-dark), #0d47a1);
transform: translateY(-3px);
box-shadow: 0 6px 15px rgba(33, 150, 243, 0.4);
}

.hasilkan-btn i {
font-size: 1rem;
}

.hasilkan-btn:disabled {
background: var(--bg-secondary);
color: var(--text-secondary);
cursor: not-allowed;
transform: none;
box-shadow: none;
}

.hasilkan-btn:disabled:hover {
background: var(--bg-secondary);
transform: none;
box-shadow: none;
}

.hilangkan-btn {
background: linear-gradient(145deg, #616161, #424242);
color: white;
border: none;
border-radius: 10px;
padding: 12px 20px;
font-size: 0.95rem;
display: flex;
align-items: center;
justify-content: center;
gap: 8px;
cursor: pointer;
transition: all 0.3s ease;
width: 100%;
font-weight: 700;
margin-top: 15px;
}

.hilangkan-btn:hover {
background: linear-gradient(145deg, #757575, #616161);
transform: translateY(-3px);
}

.hilangkan-btn i {
font-size: 1rem;
}

.hasil-perhitungan {
margin-top: 20px;
padding: 20px;
background: var(--blue-lighter);
border-radius: 10px;
border: 1px solid var(--blue-dark);
}

.hasil-item {
display: flex;
justify-content: space-between;
padding: 12px 0;
border-bottom: 1px solid rgba(33, 150, 243, 0.3);
}

.hasil-item:last-child {
border-bottom: none;
}

.hasil-label {
font-weight: 600;
color: var(--blue-light);
}

.hasil-nilai {
font-weight: 700;
color: var(--blue-color);
}

.hasil-nilai.cocok {
color: var(--success-color);
}

.hasil-nilai.tidak-cocok {
color: var(--delete-color);
}

.hasil-nilai.selisih {
color: var(--warning-color);
background-color: var(--warning-bg);
padding: 4px 8px;
border-radius: 6px;
font-weight: 800;
}

/* Style untuk status validasi */
.hasil-item.validasi-item {
margin-top: 15px;
padding-top: 15px;
border-top: 2px solid var(--blue-dark);
border-bottom: none;
}

.validasi-status {
font-weight: 700;
padding: 8px 15px;
border-radius: 8px;
text-align: center;
margin-top: 10px;
}

.validasi-status.proses {
background-color: rgba(56, 142, 60, 0.15);
color: var(--success-color);
border: 1px solid var(--success-color);
}

.validasi-status.jangan-proses {
background-color: rgba(244, 67, 54, 0.15);
color: var(--delete-color);
border: 1px solid var(--delete-color);
}

.seamless-input {
width: 100%;
min-height: 120px;
padding: 12px;
background-color: var(--bg-secondary);
color: var(--text-primary);
border: 1px solid var(--border-color);
border-radius: 8px;
font-family: 'Inter', monospace;
font-size: 0.9rem;
resize: vertical;
transition: all 0.3s ease;
}

.seamless-input:focus {
outline: none;
border-color: var(--blue-color);
box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.2);
}

/* Responsive untuk perhitungan container */
@media (max-width: 768px) {
.input-row-container {
flex-direction: column;
}

.input-kemenangan-container,
.saldo-kanan-container {
min-width: 100%;
}
}

/* Style khusus untuk total credit saja */
.total-credit-display {
text-align: center;
padding: 30px 20px;
background: var(--blue-lighter);
border-radius: 10px;
border: 2px solid var(--blue-color);
margin-top: 20px;
}

.total-credit-amount {
font-size: 2.5rem;
font-weight: 800;
color: var(--blue-color);
margin: 15px 0;
text-shadow: 0 2px 5px rgba(0,0,0,0.3);
}

.total-credit-label {
font-size: 1.1rem;
color: var(--blue-light);
font-weight: 600;
}

/* Tombol utama dengan warna biru */
.btn-primary {
background: linear-gradient(145deg, var(--blue-color), var(--blue-darker));
color: white;
}

.btn-primary:hover {
background: linear-gradient(145deg, var(--blue-dark), #0d47a1);
transform: translateY(-3px);
box-shadow: 0 8px 20px rgba(33, 150, 243, 0.3);
}

/* Highlight untuk elemen aktif */
.highlight-blue {
color: var(--blue-color) !important;
border-color: var(--blue-color) !important;
}
</style>
</head>
<body>
<div class="container">
<header>
<h1>Scatter Unlimited Kolom & Kalkulator Credit</h1>
<p>Input Scatter Unlimited kolom berbeda dan credit PG SOFT</p>
</header>

<div class="card">
<!-- Tab Navigation -->
<div class="tab-container">
<button class="tab-button active" data-tab="scatter-tab">Scatter Unlimited Kolom</button>
<button class="tab-button" data-tab="credit-tab">Kalkulator Credit PG SOFT</button>
<button class="tab-button" data-tab="shortcut-tab">SHORTCUT HITUNG SCATTER</button>
</div>

<!-- Tab Scatter 6 Kolom -->
<div id="scatter-tab" class="tab-content active">
<h2>Input Data Scatter</h2>

<!-- Input otomatis - SATU-SATUNYA INPUT UNTUK SCATTER -->
<div class="auto-input-container" id="autoInputContainer">
<div class="auto-input-header">
<h3>
<i class="fas fa-magic"></i>
Input Otomatis Unlimited Kolom sekaligus
</h3>
<div class="auto-input-info">
<span>Data terdeteksi: <span id="dataCount" class="count-badge">0</span></span>
</div>
</div>
<textarea id="autoInput" placeholder="Tempel data mentah di sini... Data akan otomatis tersebar ke kolom di bawah ini. Input unlimited."></textarea>
<div class="auto-input-actions">
<div class="auto-input-warning" id="autoInputWarning">
<i class="fas fa-info-circle"></i>
<span>Data akan selalu ditampilakan berapapun hasilnya.</span>
</div>
<div class="auto-input-error" id="autoInputError">
<i class="fas fa-exclamation-triangle"></i>
<span>Format data tidak valid. Pastikan data mengandung link gambar.</span>
</div>
<button class="auto-delete-btn" id="autoDeleteBtn">
<i class="fas fa-trash-alt"></i> Hapus Input
</button>
</div>
</div>

<div class="action-buttons">
<button class="btn btn-clear" id="clearScatter6Btn">
<i class="fas fa-trash-alt"></i> Hapus Semua
</button>
</div>

<div class="result-container">
<div class="result-header">
<h2>Hasil Format Scatter</h2>
<div class="ts-toggle-container">
<span class="ts-toggle-label">TS Mode:</span>
<label class="ts-toggle">
<input type="checkbox" id="tsToggle">
<span class="ts-toggle-slider"></span>
</label>
</div>
</div>
<div class="six-columns-result" id="scatter6Results">
<!-- Hasil akan diisi oleh JavaScript -->
</div>
</div>
</div>

<!-- Tab Kalkulator Credit PG SOFT -->
<div id="credit-tab" class="tab-content">
<h2>Kalkulator Credit PG SOFT</h2>

<div class="credit-calculator-container">
<p class="credit-description">Tempel data dari seamless untuk menghitung total credit secara otomatis</p>

<div class="credit-calculator-grid">
<div class="credit-input-section">
<div class="input-wrapper">
<textarea id="creditData" placeholder="Tempelnya disini...
Contoh:
...
Credit
IDR 1,000
...
Credit
IDR 2,500"></textarea>
</div>

<div class="action-buttons">
<button class="credit-btn credit-clear-btn" id="clearCreditBtn">
<i class="fas fa-trash-alt"></i> Hapus
</button>
</div>
</div>

<div class="credit-result-section">
<div class="credit-result-box">
<div class="credit-result-header">
<span class="credit-result-title">Total Credit:</span>
</div>

<div class="credit-total" id="creditTotal">IDR 0</div>

<div class="credit-action-buttons">
<button class="credit-btn credit-copy-btn" id="copyCreditBtn">
<i class="far fa-copy"></i> Salin Nominal
</button>
</div>
<div class="copy-notification" id="creditCopyNotification"></div>
</div>
</div>
</div>
</div>
</div>

<!-- Tab Shortcut Hitung Scatter -->
<div id="shortcut-tab" class="tab-content">
<h2>Shortcut Hitung Scatter</h2>

<!-- Container untuk Perhitungan Scatter -->
<div class="perhitungan-container" id="perhitunganContainer">
<div class="perhitungan-title">PERHITUNGAN SCATTER</div>

<!-- Kemenangan Naga dan Saldo Kanan bersebelahan -->
<div class="input-row-container">
<!-- Input Kemenangan Naga -->
<div class="input-kemenangan-container">
<div class="input-kemenangan-title">
<i class="fas fa-dragon"></i>
KEMENANGAN NAGA
</div>
<div class="kemenangan-input-group">
<input type="text" class="kemenangan-input" id="inputKemenanganNaga" placeholder="Contoh: 120,000">
</div>
</div>

<!-- Input Saldo Kanan -->
<div class="saldo-kanan-container">
<div class="saldo-kanan-title">
<i class="fas fa-wallet"></i>
SALDO KANAN
</div>
<div class="saldo-kanan-input-group">
<input type="text" class="saldo-kanan-input" id="inputSaldoKanan" placeholder="Contoh: 150,000">
</div>
</div>
</div>

<div class="saldo-kanan-info">Kosongkan saldo kanan jika tidak ada (akan dianggap 0)</div>

<!-- RUMUS PERHITUNGAN -->
<div class="contoh-gambar-container">
<div class="contoh-gambar-title">
<i class="fas fa-calculator"></i>
RUMUS PERHITUNGAN
</div>
<div class="hasil-perhitungan" style="margin-top: 0;">
<div class="hasil-item">
<span class="hasil-label">Kemenangan Naga:</span>
<span class="hasil-nilai" id="displayKemenanganNaga">IDR 0</span>
</div>
<div class="hasil-item">
<span class="hasil-label">Saldo Kanan:</span>
<span class="hasil-nilai" id="displaySaldoKanan">IDR 0</span>
</div>
<div class="hasil-item">
<span class="hasil-label">Hasil (Credit - Saldo):</span>
<span class="hasil-nilai cocok" id="displayHasilPerhitungan">IDR 0</span>
</div>
<!-- BARU: Kolom Selisih -->
<div class="hasil-item">
<span class="hasil-label">Selisih:</span>
<span class="hasil-nilai selisih" id="displaySelisih">IDR 0</span>
</div>
<!-- Tambahan untuk validasi -->
<div class="hasil-item validasi-item">
<span class="hasil-label">Status:</span>
<span class="hasil-nilai" id="statusValidasi">-</span>
</div>
<div class="validasi-status" id="validasiStatusMessage" style="display: none;"></div>
</div>
</div>

<!-- Tombol Reset -->
<button class="hilangkan-btn" id="resetScatterBtn">
<i class="fas fa-redo"></i> Reset Perhitungan
</button>

<!-- Container untuk Penjumlahan Credit IDR -->
<div class="contoh-gambar-container">
<div class="contoh-gambar-title">
<i class="fas fa-file-invoice-dollar"></i>
PENJUMLAHAN CREDIT IDR
</div>
<textarea class="seamless-input" id="seamlessDataForSum" placeholder="Tempel data seamless di sini... (Format: Credit [baris baru] IDR [jumlah])"></textarea>
</div>

<!-- Container untuk Hasil Penjumlahan Credit IDR -->
<div class="total-credit-display" id="hasilTotalCreditIDR" style="display: none;">
<div class="perhitungan-title">HASIL PENJUMLAHAN CREDIT IDR</div>
<div class="total-credit-amount" id="totalCreditAmount">IDR 0</div>
<div class="total-credit-label">Total Credit</div>
</div>
</div>
</div>
</div>
</div>

<!-- Modal untuk preview gambar -->
<div id="imageModal" class="modal">
<span class="close-btn">&times;</span>
<div class="modal-content">
<div class="image-info" id="imageInfo">
<div class="image-detail">
<i class="fas fa-columns"></i>
<span id="colInfo">Kolom 1</span>
</div>
<div class="image-detail">
<i class="fas fa-user"></i>
<span id="userIdInfo">User ID: -</span>
</div>
<div class="image-detail">
<i class="fas fa-ticket-alt"></i>
<span id="ticketInfo">Kode Tiket: -</span>
</div>
</div>

<!-- Kontrol zoom -->
<div class="zoom-controls">
<button class="zoom-btn" id="zoomOutBtn" title="Zoom Out">
<i class="fas fa-search-minus"></i>
</button>
<button class="zoom-btn" id="zoomResetBtn" title="Reset Zoom">
<i class="fas fa-sync-alt"></i>
</button>
<button class="zoom-btn" id="zoomInBtn" title="Zoom In">
<i class="fas fa-search-plus"></i>
</button>
</div>

<div class="zoom-indicator" id="zoomIndicator">100%</div>

<!-- Tombol navigasi kolom - akan dibuat dinamis -->
<div class="modal-navigation" id="modalNavigation">
<!-- Tombol navigasi akan diisi secara dinamis oleh JavaScript -->
</div>

<div class="images-container" id="imagesContainer">
<!-- Gambar akan ditambahkan di sini -->
</div>
</div>
</div>

<!-- Toast Notification -->
<div id="toast">
<i class="fas fa-check-circle"></i>
<span id="toastMessage">âœ“ Disalin ke clipboard</span>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // ===== TAB FUNCTIONALITY =====
    const tabButtons = document.querySelectorAll('.tab-button');
    const tabContents = document.querySelectorAll('.tab-content');

    tabButtons.forEach(button => {
        button.addEventListener('click', () => {
            const tabId = button.getAttribute('data-tab');

            // Update active tab button
            tabButtons.forEach(btn => btn.classList.remove('active'));
            button.classList.add('active');

            // Update active tab content
            tabContents.forEach(content => content.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
        });
    });

    // ===== SCATTER 6 KOLOM FUNCTIONALITY =====
    // Elemen DOM untuk Scatter 6 Kolom
    const autoInput = document.getElementById('autoInput');
    const autoDeleteBtn = document.getElementById('autoDeleteBtn');
    const dataCount = document.getElementById('dataCount');
    const autoInputWarning = document.getElementById('autoInputWarning');
    const autoInputError = document.getElementById('autoInputError');
    const clearScatter6Btn = document.getElementById('clearScatter6Btn');
    const scatter6Results = document.getElementById('scatter6Results');
    const modal = document.getElementById('imageModal');
    const closeBtn = document.querySelector('.close-btn');
    const imageInfo = document.getElementById('imageInfo');
    const colInfo = document.getElementById('colInfo');
    const userIdInfo = document.getElementById('userIdInfo');
    const ticketInfo = document.getElementById('ticketInfo');
    const imagesContainer = document.getElementById('imagesContainer');
    const tsToggle = document.getElementById('tsToggle');
    const modalNavigation = document.getElementById('modalNavigation');

    // Variabel untuk kontrol zoom
    const zoomInBtn = document.getElementById('zoomInBtn');
    const zoomOutBtn = document.getElementById('zoomOutBtn');
    const zoomResetBtn = document.getElementById('zoomResetBtn');
    const zoomIndicator = document.getElementById('zoomIndicator');

    // Variabel global untuk menyimpan hasil
    let scatterResults = [];

    // Data untuk fitur undo cancel
    let undoData = [];

    // Variabel untuk menyimpan kolom yang sedang aktif di modal
    let currentModalColumn = 1;

    // Variabel untuk kontrol zoom
    let currentZoomLevel = 1;
    const ZOOM_STEP = 0.2;
    const MIN_ZOOM = 0.5;
    const MAX_ZOOM = 3;

    // ===== CREDIT CALCULATOR FUNCTIONALITY =====
    // Elemen DOM untuk Kalkulator Credit
    const creditDataEl = document.getElementById('creditData');
    const clearCreditBtn = document.getElementById('clearCreditBtn');
    const creditTotalEl = document.getElementById('creditTotal');
    const copyCreditBtn = document.getElementById('copyCreditBtn');
    const creditCopyNotification = document.getElementById('creditCopyNotification');
    const toast = document.getElementById('toast');
    const toastMessage = document.getElementById('toastMessage');

    // ===== SHORTCUT HITUNG SCATTER FUNCTIONALITY =====
    // Elemen DOM untuk Shortcut Hitung Scatter
    const inputKemenanganNaga = document.getElementById('inputKemenanganNaga');
    const inputSaldoKanan = document.getElementById('inputSaldoKanan');
    const resetScatterBtn = document.getElementById('resetScatterBtn');
    const displayKemenanganNaga = document.getElementById('displayKemenanganNaga');
    const displaySaldoKanan = document.getElementById('displaySaldoKanan');
    const displayHasilPerhitungan = document.getElementById('displayHasilPerhitungan');
    const displaySelisih = document.getElementById('displaySelisih');
    const statusValidasi = document.getElementById('statusValidasi');
    const validasiStatusMessage = document.getElementById('validasiStatusMessage');
    const seamlessDataForSum = document.getElementById('seamlessDataForSum');
    const hasilTotalCreditIDR = document.getElementById('hasilTotalCreditIDR');
    const totalCreditAmount = document.getElementById('totalCreditAmount');

    // Variabel untuk menyimpan nilai perhitungan
    let totalCredit = 0;

    // ===== FUNGSI SCATTER 6 KOLOM =====
    // Event untuk input otomatis
    autoInput.addEventListener('input', function() {
        updateDataCount();
        processAutoInput();
    });

    autoDeleteBtn.addEventListener('click', function() {
        autoInput.value = '';
        updateDataCount();
        processAutoInput();
    });

    // Tombol hapus untuk tab 6 kolom
    clearScatter6Btn.addEventListener('click', function() {
        autoInput.value = '';
        scatter6Results.innerHTML = '';
        scatterResults = [];
        // Reset undo data
        undoData = [];
        updateDataCount();
        hideAllMessages();
    });

    // Event untuk modal gambar
    closeBtn.addEventListener('click', closeModal);

    modal.addEventListener('click', function(e) {
        if (e.target === modal) {
            closeModal();
        }
    });

    // Tutup modal dengan tombol ESC
    document.addEventListener('keydown', function(e) {
        if (e.key === "Escape" && modal.style.display === "block") {
            closeModal();
        }
    });

    // Event listener untuk toggle TS
    tsToggle.addEventListener('change', function() {
        updateResultsWithTS();
    });

    // Event listener untuk tombol navigasi di modal
    modalNavigation.addEventListener('click', function(e) {
        const navBtn = e.target.closest('.nav-btn');
        if (navBtn) {
            const colIndex = parseInt(navBtn.getAttribute('data-col'));

            // Pindah ke kolom yang dipilih
            navigateToColumn(colIndex);
        }
    });

    // Event listener untuk kontrol zoom
    zoomInBtn.addEventListener('click', function() {
        zoomIn();
    });

    zoomOutBtn.addEventListener('click', function() {
        zoomOut();
    });

    zoomResetBtn.addEventListener('click', function() {
        resetZoom();
    });

    // ===== FUNGSI SCATTER 6 KOLOM =====
    // Fungsi untuk auto-scroll ke hasil - DIOPTIMASI
    function scrollToResults() {
        const resultContainer = document.querySelector('.result-container');
        if (resultContainer) {
            // Gunakan instant scroll untuk kecepatan maksimal
            resultContainer.scrollIntoView({
                behavior: 'auto',
                block: 'start'
            });
        }
    }

    // Fungsi untuk zoom in
    function zoomIn() {
        if (currentZoomLevel < MAX_ZOOM) {
            currentZoomLevel += ZOOM_STEP;
            applyZoom();
        }
    }

    // Fungsi untuk zoom out
    function zoomOut() {
        if (currentZoomLevel > MIN_ZOOM) {
            currentZoomLevel -= ZOOM_STEP;
            applyZoom();
        }
    }

    // Fungsi untuk reset zoom
    function resetZoom() {
        currentZoomLevel = 1;
        applyZoom();
    }

    // Fungsi untuk menerapkan zoom ke semua gambar
    function applyZoom() {
        const images = document.querySelectorAll('.modal-img');
        images.forEach(img => {
            img.style.transform = `scale(${currentZoomLevel})`;
        });

        // Update indikator zoom
        zoomIndicator.textContent = `${Math.round(currentZoomLevel * 100)}%`;

        // Tampilkan indikator zoom sementara
        zoomIndicator.style.display = 'block';
        setTimeout(() => {
            zoomIndicator.style.display = 'none';
        }, 2000);
    }

    // Fungsi untuk navigasi ke kolom tertentu
    function navigateToColumn(colIndex) {
        const colData = scatterResults[colIndex - 1];

        // Jika kolom memiliki gambar, tampilkan gambar kolom tersebut
        if (colData && colData.hasImages) {
            updateModalForColumn(colIndex);
        }
    }

    // Fungsi untuk memperbarui modal dengan data kolom tertentu
    function updateModalForColumn(colIndex) {
        const colData = scatterResults[colIndex - 1];
        if (!colData || !colData.hasImages) return;

        // Update kolom yang sedang aktif
        currentModalColumn = colIndex;

        // Update informasi kolom
        colInfo.textContent = `Kolom ${colIndex}`;
        userIdInfo.textContent = `User ID: ${colData.userId}`;
        ticketInfo.textContent = `Kode Tiket: ${colData.ticketCode}`;

        // Kosongkan container gambar
        imagesContainer.innerHTML = '';

        // Tambahkan semua gambar ke container
        colData.links.forEach(link => {
            const img = document.createElement('img');
            img.src = link;
            img.className = 'modal-img';
            img.alt = 'Bukti gambar';
            imagesContainer.appendChild(img);

            // Tambahkan event listener untuk klik gambar (toggle zoom)
            img.addEventListener('click', function() {
                this.classList.toggle('zoomed');
                if (this.classList.contains('zoomed')) {
                    // Jika di-zoom, atur transform scale
                    this.style.transform = `scale(${currentZoomLevel})`;
                } else {
                    // Jika tidak di-zoom, kembalikan ke ukuran normal
                    this.style.transform = 'scale(1)';
                }
            });
        });

        // Reset zoom setiap kali mengganti kolom
        resetZoom();

        // Update status tombol navigasi
        updateNavigationButtons();
    }

    // Fungsi untuk membuat tombol navigasi modal secara dinamis
    function generateModalNavigation() {
        modalNavigation.innerHTML = '';

        // Loop melalui scatterResults dan buat tombol untuk setiap kolom yang memiliki gambar
        scatterResults.forEach((result, index) => {
            const colIndex = index + 1;
            if (result && result.hasImages) {
                const button = document.createElement('button');
                button.className = 'nav-btn';
                if (colIndex === currentModalColumn) {
                    button.classList.add('active');
                }
                button.setAttribute('data-col', colIndex);
                button.textContent = colIndex;
                modalNavigation.appendChild(button);
            }
        });
    }

    // Fungsi untuk memperbarui status tombol navigasi
    function updateNavigationButtons() {
        const navButtons = document.querySelectorAll('.nav-btn');

        navButtons.forEach(btn => {
            const colIndex = parseInt(btn.getAttribute('data-col'));
            const colData = scatterResults[colIndex - 1];

            // Nonaktifkan tombol jika kolom tidak memiliki gambar
            if (!colData || !colData.hasImages) {
                btn.disabled = true;
            } else {
                btn.disabled = false;
            }

            // Tandai tombol aktif untuk kolom yang sedang ditampilkan
            if (colIndex === currentModalColumn) {
                btn.classList.add('active');
            } else {
                btn.classList.remove('active');
            }
        });
    }

    // Fungsi untuk menyembunyikan semua pesan
    function hideAllMessages() {
        autoInputWarning.style.display = 'none';
        autoInputError.style.display = 'none';
    }

    // Fungsi untuk memperbarui jumlah data yang terdeteksi
    function updateDataCount() {
        const data = autoInput.value.trim();
        if (!data) {
            dataCount.textContent = '0';
            hideAllMessages();
            return;
        }

        // Hitung jumlah baris data
        const lines = data.split('\n').filter(line => line.trim().length > 0);
        // Filter baris yang memiliki link (bukti gambar)
        const linesWithLinks = lines.filter(line => {
            return line.includes('http') && /\b\d{19}\b/.test(line);
        });

        dataCount.textContent = linesWithLinks.length;

        // Tampilkan peringatan jika lebih dari 6 data
        if (linesWithLinks.length > 6) {
            autoInputWarning.style.display = 'flex';
            autoInputError.style.display = 'none';
        } else if (linesWithLinks.length > 0) {
            autoInputWarning.style.display = 'flex';
            autoInputError.style.display = 'none';
        } else {
            hideAllMessages();
        }
    }

    // PERUBAHAN UTAMA: Fungsi untuk memproses input otomatis
    function processAutoInput() {
        const data = autoInput.value.trim();
        if (!data) {
            // Kosongkan hasil jika tidak ada data
            scatter6Results.innerHTML = '';
            scatterResults = [];
            return;
        }

        // Pisahkan data menjadi baris-baris
        const lines = data.split('\n').filter(line => line.trim().length > 0);

        // Filter baris yang valid (yang memiliki kode tiket 19 digit DAN link)
        const validLines = lines.filter(line => {
            return /\b\d{19}\b/.test(line) && line.includes('http');
        });

        if (validLines.length === 0) {
            // Kosongkan hasil jika tidak ada data valid
            scatter6Results.innerHTML = '';
            scatterResults = [];
            autoInputError.style.display = 'flex';
            return;
        } else {
            autoInputError.style.display = 'none';
        }

        // Kosongkan hasil sebelumnya
        scatter6Results.innerHTML = '';
        scatterResults = [];

        // Proses setiap baris data yang memiliki link
        const processedResults = [];
        validLines.forEach((line, index) => {
            const result = processSingleScatterData(line);
            // PERUBAHAN PENTING: Hanya simpan jika memiliki bettingan yang valid (tidak '-', '0', atau kosong)
            if (result && result.hasImages && result.betValue !== '-' && result.betValue !== '0' && result.betValue !== '') {
                processedResults.push(result);
            }
        });

        // PERUBAHAN: Update scatterResults hanya dengan data yang memiliki bettingan
        scatterResults = processedResults;

        // Tampilkan hasil hanya jika ada data dengan bettingan
        if (scatterResults.length > 0) {
            renderScatter6Results();

            // Auto-scroll ke hasil jika ada data - DIOPTIMASI
            requestAnimationFrame(() => {
                scrollToResults();
            });
        } else {
            // Jika tidak ada data dengan bettingan, tampilkan pesan error
            scatter6Results.innerHTML = '<p style="text-align:center; color: var(--warning-color); padding: 20px;">Tidak ada data dengan nominal bettingan yang valid. Pastikan data mengandung angka bettingan (bukan 0).</p>';
        }
    }

    // PERUBAHAN UTAMA: Fungsi untuk memproses data scatter tunggal - MENGAMBIL DEBIT SETELAH KODE TIKET
    function processSingleScatterData(data) {
        if (!data) {
            return {
                userId: '-',
                ticketCode: '-',
                links: [],
                linksText: '-',
                betValue: '-',
                hasData: false,
                hasImages: false,
                isCancelled: false
            };
        }

        // Split data menjadi array
        const parts = data.split(/\s+/);

        // Ekstrak kode tiket (19 digit)
        const ticketMatch = data.match(/\b\d{19}\b/);
        const ticketCode = ticketMatch ? ticketMatch[0] : '-';

        // Ekstrak username (kata sebelum link pertama)
        let username = '-';
        const firstLinkIndex = parts.findIndex(part => part.startsWith('http'));
        if (firstLinkIndex > 0) {
            username = parts[firstLinkIndex - 1];
        } else if (parts.length > 0) {
            username = parts[0];
        }

        // Ekstrak link (maksimal 3)
        const imageLinks = (data.match(/https?:\/\/[^\s]+/g) || []).slice(0, 3);
        const linksText = imageLinks.join(', ') || '-';
        const hasImages = imageLinks.length > 0;

        // PERUBAHAN UTAMA: Ekstrak nominal debit setelah kode tiket
        let betValue = '-';
        let betValueFound = false;

        if (ticketMatch) {
            // Ambil bagian setelah kode tiket
            const afterTicket = data.substring(ticketMatch.index + ticketCode.length);

            // Cari angka dengan koma (format: 2,800) atau tanpa koma (2800)
            const numberMatch = afterTicket.match(/(\d{1,3}(?:,\d{3})*)/);

            if (numberMatch) {
                const rawNumber = numberMatch[1].replace(/,/g, '');
                const numberValue = parseFloat(rawNumber);
                // PERUBAHAN: Cek jika angka bukan 0
                if (!isNaN(numberValue) && numberValue > 0) {
                    betValue = formatNumber(rawNumber);
                    betValueFound = true;
                }
            } else {
                // Fallback: cari angka di seluruh data menggunakan regex yang lebih baik
                // Cari pola: angka yang mungkin diawali oleh "IDR", "Rp", atau simbol mata uang lainnya
                const currencyPatterns = [
                    /IDR\s*(\d{1,3}(?:,\d{3})*)/i,
                    /Rp\s*(\d{1,3}(?:,\d{3})*)/i,
                    /(\d{1,3}(?:,\d{3})*)\s*(?:IDR|Rp)/i,
                    /\b(\d{4,})\b/  // Angka 4 digit atau lebih (untuk menghindari tahun, dll)
                ];

                for (let pattern of currencyPatterns) {
                    const match = data.match(pattern);
                    if (match) {
                        const rawNumber = match[1] ? match[1].replace(/,/g, '') : match[1];
                        const numberValue = parseFloat(rawNumber);
                        // PERUBAHAN: Cek jika angka bukan 0 dan bukan kode tiket
                        if (!isNaN(numberValue) && numberValue > 0 && rawNumber !== ticketCode) {
                            betValue = formatNumber(rawNumber);
                            betValueFound = true;
                            break;
                        }
                    }
                }

                // Jika masih belum ditemukan, cari angka dengan koma di seluruh data
                if (!betValueFound) {
                    const allNumbers = data.match(/(\d{1,3}(?:,\d{3})*)/g);
                    if (allNumbers && allNumbers.length > 0) {
                        for (let num of allNumbers) {
                            const cleanNum = num.replace(/,/g, '');
                            const numberValue = parseFloat(cleanNum);
                            // PERUBAHAN: Cek jika angka bukan 0, bukan kode tiket, dan panjangnya minimal 3 digit
                            if (!isNaN(numberValue) && numberValue > 0 && cleanNum !== ticketCode && cleanNum.length >= 3) {
                                betValue = formatNumber(cleanNum);
                                betValueFound = true;
                                break;
                            }
                        }
                    }
                }
            }
        }

        // PERUBAHAN: hasData sekarang memerlukan gambar DAN bettingan yang valid (bukan 0)
        const hasData = hasImages && betValueFound && betValue !== '0';

        return {
            userId: username,
            ticketCode,
            links: imageLinks,
            linksText,
            betValue,
            hasData: hasData,
            hasImages: hasImages,
            isCancelled: false
        };
    }

    // Fungsi untuk merender semua hasil
    function renderScatter6Results() {
        // Kosongkan hasil sebelumnya
        scatter6Results.innerHTML = '';

        // Jika tidak ada hasil, jangan render apa-apa
        if (scatterResults.length === 0) {
            return;
        }

        // Bagi scatterResults menjadi chunk of 6 (untuk setiap baris)
        const chunkSize = 6;
        const chunks = [];
        for (let i = 0; i < scatterResults.length; i += chunkSize) {
            chunks.push(scatterResults.slice(i, i + chunkSize));
        }

        // Render setiap baris
        chunks.forEach((chunk, rowIndex) => {
            const rowDiv = document.createElement('div');

            // Tentukan apakah baris ini penuh (6 kolom) atau tidak
            if (chunk.length === 6) {
                rowDiv.className = 'scatter-row full-row';
            } else {
                rowDiv.className = 'scatter-row';
            }

            // Render setiap kolom dalam baris
            chunk.forEach((result, colIndex) => {
                const absoluteIndex = rowIndex * chunkSize + colIndex;
                renderScatter6Result(result, absoluteIndex + 1, rowDiv);
            });

            scatter6Results.appendChild(rowDiv);
        });
    }

    // Fungsi untuk merender hasil satu kolom
    function renderScatter6Result(result, colIndex, rowDiv) {
        // PERUBAHAN PENTING: Hanya render jika memiliki data DAN memiliki gambar DAN memiliki bettingan yang bukan 0
        if (!result || !result.hasData || !result.hasImages || result.betValue === '-' || result.betValue === '0' || result.betValue === '') {
            return; // Jangan render sama sekali
        }

        const colDiv = document.createElement('div');
        colDiv.className = `column-result col${((colIndex-1) % 6) + 1}`;
        colDiv.id = `result-col${colIndex}`;
        colDiv.dataset.colIndex = colIndex;

        // Tambahkan class berdasarkan status kolom
        if (result && result.hasData && !result.isCancelled) {
            colDiv.classList.add('has-data');
        } else if (result && result.isCancelled) {
            colDiv.classList.add('cancelled');
        }

        // Format user ID dengan TS jika toggle aktif
        const displayUserId = tsToggle.checked && result && result.userId !== '-' ?
            `${result.userId} TS` : (result ? result.userId : '-');

        // Cek apakah ada data undo untuk kolom ini
        const hasUndoData = undoData[colIndex - 1] !== undefined && undoData[colIndex - 1] !== null;

        // Data untuk kolom (jika ada)
        const ticketCode = result ? result.ticketCode : '-';
        const linksText = result ? result.linksText : '-';
        const betValue = result ? result.betValue : '-';
        const hasImages = result ? result.hasImages : false;
        const isCancelled = result ? result.isCancelled : false;

        // Jika kolom dibatalkan, tampilkan data yang dibatalkan
        const showData = !isCancelled && result && result.hasData;

        colDiv.innerHTML = `
            <h4>Kolom ${colIndex}</h4>
            <div class="column-result-item">
                <div class="column-result-label">User ID :</div>
                <div class="column-result-value">${showData ? displayUserId : '-'}</div>
                ${showData ? `
                <button class="column-btn-copy" data-value="${displayUserId}" title="Salin User ID">
                    <i class="far fa-copy"></i>
                </button>
                ` : ''}
            </div>
            <div class="column-result-item">
                <div class="column-result-label">Kode Tiket :</div>
                <div class="column-result-value">${showData ? ticketCode : '-'}</div>
                ${showData ? `
                <button class="column-btn-copy" data-value="${ticketCode}" title="Salin Kode Tiket">
                    <i class="far fa-copy"></i>
                </button>
                ` : ''}
            </div>
            <div class="column-result-item">
                <div class="column-result-label">Link Bukti :</div>
                <div class="column-result-value">
                    <div class="link-preview-container">
                        <div class="link-placeholder">..</div>
                        ${showData ? `
                        <button class="column-btn-copy" data-value="${linksText}" title="Salin Link">
                            <i class="far fa-copy"></i>
                        </button>
                        ` : ''}
                    </div>
                </div>
            </div>
            <div class="column-result-item">
                <div class="column-result-label">Bettingan :</div>
                <div class="column-result-value">${showData ? betValue : '-'}</div>
                ${showData ? `
                <button class="column-btn-copy" data-value="${betValue}" title="Salin Bettingan">
                    <i class="far fa-copy"></i>
                </button>
                ` : ''}
            </div>
            ${showData && hasImages ? `
            <button class="view-image-btn" data-col-index="${colIndex}">
                <i class="fas fa-images"></i> Lihat Gambar
            </button>
            ` : ''}
            <button class="done-btn ${isCancelled ? 'disabled' : ''}" ${isCancelled ? 'disabled' : ''}>
                <i class="fas fa-check-circle"></i> Tandai Selesai
            </button>
            <button class="cancel-btn ${hasUndoData ? 'undo' : ''}" data-col-index="${colIndex}">
                <i class="fas fa-${hasUndoData ? 'undo' : 'times'}"></i> ${hasUndoData ? 'Undo' : 'Cancel'}
            </button>
        `;

        rowDiv.appendChild(colDiv);
    }

    // Fungsi untuk memperbarui hasil dengan TS jika toggle aktif
    function updateResultsWithTS() {
        const isTSToggled = tsToggle.checked;

        // Perbarui semua kolom hasil
        scatterResults.forEach((result, index) => {
            if (result && result.hasData && result.hasImages && !result.isCancelled && result.betValue !== '-' && result.betValue !== '0') {
                const colIndex = index + 1;
                const colElement = document.getElementById(`result-col${colIndex}`);
                if (colElement) {
                    // Format user ID dengan TS jika toggle aktif
                    const displayUserId = isTSToggled && result.userId !== '-' ?
                        `${result.userId} TS` : result.userId;

                    // Perbarui nilai User ID
                    const userIdElement = colElement.querySelector('.column-result-value');
                    if (userIdElement && colElement.querySelector('.column-result-label').textContent.includes('User ID')) {
                        userIdElement.textContent = displayUserId;

                        // Perbarui juga nilai data untuk tombol salin
                        const copyButton = colElement.querySelector('.column-btn-copy[data-value]');
                        if (copyButton) {
                            copyButton.setAttribute('data-value', displayUserId);
                        }
                    }
                }
            }
        });
    }

    // Event delegation untuk tombol salin di hasil 6 kolom
    scatter6Results.addEventListener('click', function(e) {
        const btn = e.target.closest('.column-btn-copy');
        if (btn) {
            // Cek apakah kolom ini sudah ditandai selesai (memiliki class 'done')
            const columnResult = btn.closest('.column-result');
            if (columnResult.classList.contains('done')) {
                // Jika kolom sudah selesai, jangan salin dan beri feedback
                const btnIcon = btn.querySelector('i');
                const originalIcon = btnIcon.className;
                btnIcon.className = 'fas fa-lock';
                setTimeout(() => {
                    btnIcon.className = originalIcon;
                }, 1000);
                return; // Hentikan eksekusi
            }

            const value = btn.getAttribute('data-value');
            const btnIcon = btn.querySelector('i');
            const originalIcon = btnIcon.className;
            const parentItem = btn.closest('.column-result-item');

            // Animasi tombol
            btn.classList.add('copied');

            // Animasi highlight pada seluruh kolom item
            parentItem.classList.add('copied');

            // Ganti ikon ke centang
            btnIcon.className = 'fas fa-check';

            // Salin teks
            copyText(value).then(() => {
                console.log('Teks berhasil disalin');
            }).catch(() => {
                console.error('Gagal menyalin teks');
            });

            // Kembalikan ke ikon semula setelah 2 detik
            setTimeout(() => {
                btnIcon.className = originalIcon;
                btn.classList.remove('copied');
            }, 2000);

            // Hapus class highlight setelah animasi selesai
            setTimeout(() => {
                parentItem.classList.remove('copied');
            }, 1500);
        }

        // Event untuk tombol "Lihat Gambar"
        const viewBtn = e.target.closest('.view-image-btn');
        if (viewBtn) {
            const colIndex = parseInt(viewBtn.getAttribute('data-col-index'));
            showImagesForColumn(colIndex);
        }

        // Event untuk tombol Done
        const doneBtn = e.target.closest('.done-btn');
        if (doneBtn) {
            const columnResult = doneBtn.closest('.column-result');

            if (doneBtn.classList.contains('undo')) {
                // Jika tombol sudah dalam mode "Undo", kembalikan ke normal
                doneBtn.innerHTML = '<i class="fas fa-check-circle"></i> Tandai Selesai';
                doneBtn.classList.remove('undo');
                columnResult.classList.remove('done');
            } else {
                // Tandai kolom sebagai selesai
                doneBtn.innerHTML = '<i class="fas fa-undo"></i> Batalkan';
                doneBtn.classList.add('undo');
                columnResult.classList.add('done');
            }
        }

        // Event untuk tombol Cancel/Undo - PERBAIKAN UTAMA
        const cancelBtn = e.target.closest('.cancel-btn');
        if (cancelBtn) {
            const colIndex = parseInt(cancelBtn.getAttribute('data-col-index'));

            if (cancelBtn.classList.contains('undo')) {
                // Jika tombol dalam mode "Undo", kembalikan data
                if (undoData[colIndex - 1] !== undefined) {
                    // Kembalikan data dari undoData
                    scatterResults[colIndex - 1] = undoData[colIndex - 1];
                    undoData[colIndex - 1] = null;

                    // Proses ulang data
                    renderScatter6Results();
                }
            } else {
                // Mode "Cancel" - tandai kolom sebagai dibatalkan
                const currentData = scatterResults[colIndex - 1];

                if (currentData && currentData.hasData) {
                    // Simpan data untuk undo
                    undoData[colIndex - 1] = {...currentData};

                    // Tandai kolom sebagai dibatalkan
                    scatterResults[colIndex - 1].isCancelled = true;

                    // Proses ulang data
                    renderScatter6Results();
                }
            }
        }
    });

    // Fungsi untuk menutup modal
    function closeModal() {
        modal.style.display = "none";
        // Reset zoom saat menutup modal
        resetZoom();
    }

    // Fungsi untuk menampilkan gambar dari kolom tertentu
    function showImagesForColumn(colIndex) {
        currentModalColumn = colIndex;
        // Generate tombol navigasi modal sebelum menampilkan modal
        generateModalNavigation();
        updateModalForColumn(colIndex);
        modal.style.display = "block";
    }

    function formatNumber(num) {
        if (!num || num === '-' || num === '0') return '-';
        // Konversi ke number untuk pengecekan
        const n = parseFloat(num);
        if (isNaN(n) || n <= 0) return '-';
        return n.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
    }

    // ===== FUNGSI CREDIT CALCULATOR =====
    // Auto hitung saat data ditempel
    creditDataEl.addEventListener('input', function() {
        setTimeout(calculateCredit, 100);
    });

    // Tombol hapus kalkulator
    clearCreditBtn.addEventListener('click', function() {
        creditDataEl.value = '';
        creditTotalEl.textContent = 'IDR 0';
        creditCopyNotification.textContent = '';
    });

    // Tombol salin nominal credit
    copyCreditBtn.addEventListener('click', copyCreditAmount);

    // Fungsi untuk Kalkulator Credit PG SOFT
    function calculateCredit() {
        const data = creditDataEl.value.trim();

        if (!data) {
            creditTotalEl.textContent = 'IDR 0';
            return;
        }

        const lines = data.split('\n');
        let totalCredit = 0;

        for (let i = 0; i < lines.length; i++) {
            if (lines[i].trim() === 'Credit') {
                const amountLine = lines[i+1] ? lines[i+1].trim() : '';
                const amountMatch = amountLine.match(/IDR\s([\d,]+)/i);

                if (amountMatch) {
                    const amountStr = amountMatch[1].replace(/,/g, '');
                    const amount = parseFloat(amountStr);

                    if (!isNaN(amount)) {
                        totalCredit += amount;
                    }
                }
            }
        }

        creditTotalEl.textContent = `IDR ${totalCredit.toLocaleString('id-ID')}`;
        creditCopyNotification.textContent = '';
    }

    function copyCreditAmount() {
        const resultText = creditTotalEl.textContent;
        const numberOnly = resultText.replace('IDR ', '').replace(/\./g, '').replace(',', '.');

        copyText(numberOnly).then(() => {
            showToast("Nominal berhasil disalin!");
        }).catch(err => {
            console.error('Gagal menyalin teks: ', err);
            showToast("Gagal menyalin!", "error");
        });
    }

    // ===== FUNGSI SHORTCUT HITUNG SCATTER =====
    // Format input kemenangan naga
    inputKemenanganNaga.addEventListener('input', function() {
        formatKemenanganInput(this);
        hitungScatter(); // Hitung otomatis saat input berubah
    });

    // Format input saldo kanan
    inputSaldoKanan.addEventListener('input', function() {
        formatSaldoKanan(this);
        hitungScatter(); // Hitung otomatis saat input berubah
    });

    // Auto hitung credit saat data seamless diinput
    seamlessDataForSum.addEventListener('input', function() {
        hitungCreditSeamless(); // Panggil langsung tanpa timeout
    });

    // Tombol reset scatter
    resetScatterBtn.addEventListener('click', resetScatter);

    // Fungsi untuk format input kemenangan
    function formatKemenanganInput(input) {
        let value = input.value.replace(/[^\d,]/g, '');
        // Hapus koma berlebih
        value = value.replace(/,+/g, ',');
        // Hanya biarkan satu koma
        const parts = value.split(',');
        if (parts.length > 2) {
            value = parts[0] + ',' + parts.slice(1).join('');
        }
        input.value = value;
    }

    // Fungsi untuk format input saldo kanan
    function formatSaldoKanan(input) {
        let value = input.value.replace(/[^\d,]/g, '');
        // Hapus koma berlebih
        value = value.replace(/,+/g, ',');
        // Hanya biarkan satu koma
        const parts = value.split(',');
        if (parts.length > 2) {
            value = parts[0] + ',' + parts.slice(1).join('');
        }
        input.value = value;
    }

    // Fungsi untuk menghitung scatter
    function hitungScatter() {
        const kemenanganStr = inputKemenanganNaga.value.trim().replace(/,/g, '');
        const saldoStr = inputSaldoKanan.value.trim().replace(/,/g, '');

        const kemenangan = parseFloat(kemenanganStr) || 0;
        const saldo = parseFloat(saldoStr) || 0;

        // Tampilkan nilai yang sudah diformat
        displayKemenanganNaga.textContent = `IDR ${kemenangan.toLocaleString('id-ID')}`;
        displaySaldoKanan.textContent = `IDR ${saldo.toLocaleString('id-ID')}`;

        // Hitung hasil (Credit - Saldo) untuk ditampilkan
        const hasilPerhitungan = totalCredit - saldo;
        displayHasilPerhitungan.textContent = `IDR ${hasilPerhitungan.toLocaleString('id-ID')}`;

        // Hitung selisih antara Hasil (Credit - Saldo) dan Kemenangan Naga
        const selisih = Math.abs(hasilPerhitungan - kemenangan);
        
        // Tampilkan selisih jika ada perbedaan
        if (selisih > 0.01) { // Gunakan toleransi kecil untuk angka desimal
            displaySelisih.textContent = `IDR ${selisih.toLocaleString('id-ID')}`;
            displaySelisih.classList.add('selisih');
        } else {
            displaySelisih.textContent = 'IDR 0';
            displaySelisih.classList.remove('selisih');
        }

        // Validasi dengan kemenangan naga
        validasiPerhitungan();
    }

    // FUNGSI YANG DIPERBAIKI: Hanya mengambil data dari bagian "Credit" saja
    function hitungCreditSeamless() {
        const data = seamlessDataForSum.value.trim();
        
        if (!data) {
            hasilTotalCreditIDR.style.display = 'none';
            totalCredit = 0;
            validasiPerhitungan();
            return;
        }
        
        const lines = data.split('\n');
        totalCredit = 0;
        
        // Cari pola "Credit" diikuti baris berikutnya dengan "IDR [angka]"
        for (let i = 0; i < lines.length; i++) {
            if (lines[i].trim().toLowerCase() === 'credit') {
                // Cek baris berikutnya
                if (i + 1 < lines.length) {
                    const nextLine = lines[i + 1].trim();
                    const amountMatch = nextLine.match(/IDR\s+([\d,\.]+)/i);
                    
                    if (amountMatch) {
                        let amountStr = amountMatch[1];
                        // Hapus koma (pemisah ribuan) dan titik (jika digunakan sebagai pemisah ribuan)
                        amountStr = amountStr.replace(/,/g, '');
                        // Jika masih ada titik, hapus jika digunakan sebagai pemisah ribuan
                        // Asumsi: jika ada titik, cek apakah setelah titik ada 3 digit (mungkin pemisah ribuan)
                        if (amountStr.includes('.')) {
                            const parts = amountStr.split('.');
                            if (parts.length === 2 && parts[1].length === 3) {
                                // Ini mungkin pemisah ribuan (misal: 1.000)
                                amountStr = parts.join(''); // Gabungkan tanpa titik
                            }
                            // Jika ada lebih dari satu titik, hapus semua titik
                            amountStr = amountStr.replace(/\./g, '');
                        }
                        
                        const amount = parseFloat(amountStr);
                        
                        // Validasi: angka harus valid dan positif
                        if (!isNaN(amount) && amount > 0) {
                            totalCredit += amount;
                        }
                    }
                }
            }
        }
        
        // Tampilkan hasil jika ada credit yang ditemukan
        if (totalCredit > 0) {
            totalCreditAmount.textContent = `IDR ${totalCredit.toLocaleString('id-ID')}`;
            hasilTotalCreditIDR.style.display = 'block';
            
            // Auto-scroll ke hasil
            setTimeout(() => {
                hasilTotalCreditIDR.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }, 100);
            
        } else {
            // Sembunyikan container jika tidak ada credit
            hasilTotalCreditIDR.style.display = 'none';
        }

        // Hitung ulang hasil (Credit - Saldo) untuk ditampilkan
        const saldoStr = inputSaldoKanan.value.trim().replace(/,/g, '');
        const saldo = parseFloat(saldoStr) || 0;
        const hasilPerhitungan = totalCredit - saldo;
        displayHasilPerhitungan.textContent = `IDR ${hasilPerhitungan.toLocaleString('id-ID')}`;

        // Hitung selisih antara Hasil (Credit - Saldo) dan Kemenangan Naga
        const kemenanganStr = inputKemenanganNaga.value.trim().replace(/,/g, '');
        const kemenangan = parseFloat(kemenanganStr) || 0;
        const selisih = Math.abs(hasilPerhitungan - kemenangan);
        
        // Tampilkan selisih jika ada perbedaan
        if (selisih > 0.01) { // Gunakan toleransi kecil untuk angka desimal
            displaySelisih.textContent = `IDR ${selisih.toLocaleString('id-ID')}`;
            displaySelisih.classList.add('selisih');
        } else {
            displaySelisih.textContent = 'IDR 0';
            displaySelisih.classList.remove('selisih');
        }

        // Validasi dengan hasil scatter
        validasiPerhitungan();
    }

    // Fungsi untuk validasi perhitungan (RUMUS BARU: Credit - Saldo = Kemenangan Naga)
    function validasiPerhitungan() {
        const validasiStatusMessageEl = document.getElementById('validasiStatusMessage');
        
        // Reset tampilan
        validasiStatusMessageEl.style.display = 'none';
        validasiStatusMessageEl.className = 'validasi-status';
        
        // Ambil nilai dari input
        const kemenanganNagaStr = inputKemenanganNaga.value.trim().replace(/,/g, '');
        const saldoKananStr = inputSaldoKanan.value.trim().replace(/,/g, '');
        
        const kemenanganNaga = parseFloat(kemenanganNagaStr) || 0;
        const saldoKanan = parseFloat(saldoKananStr) || 0;
        
        // Hitung selisihCredit = totalCredit - Saldo Kanan
        const selisihCredit = totalCredit - saldoKanan;
        
        // Periksa apakah nilai sudah dihitung?
        if (kemenanganNaga === 0 && totalCredit === 0) {
            statusValidasi.textContent = 'Belum dihitung';
            return;
        }
        
        // Bandingkan selisihCredit dengan kemenanganNaga (RUMUS BARU)
        if (Math.abs(selisihCredit - kemenanganNaga) < 0.01) { // Gunakan toleransi kecil untuk angka desimal
            // Sama: Credit - Saldo = Kemenangan Naga
            statusValidasi.textContent = 'SAMA';
            statusValidasi.className = 'hasil-nilai cocok';
            
            validasiStatusMessageEl.textContent = 'âœ… PROSES';
            validasiStatusMessageEl.className = 'validasi-status proses';
            validasiStatusMessageEl.style.display = 'block';
            
            showToast("Hasil perhitungan sama! Bisa diproses.");
        } else {
            // Berbeda
            statusValidasi.textContent = 'BERBEDA';
            statusValidasi.className = 'hasil-nilai tidak-cocok';
            
            validasiStatusMessageEl.textContent = 'âŒ JANGAN PROSES, nanti kutip sampah';
            validasiStatusMessageEl.className = 'validasi-status jangan-proses';
            validasiStatusMessageEl.style.display = 'block';
            
            showToast("Hasil perhitungan berbeda! Jangan diproses.", "error");
        }
    }

    // Fungsi untuk reset perhitungan scatter
    function resetScatter() {
        inputKemenanganNaga.value = '';
        inputSaldoKanan.value = '';
        seamlessDataForSum.value = '';
        displayKemenanganNaga.textContent = 'IDR 0';
        displaySaldoKanan.textContent = 'IDR 0';
        displayHasilPerhitungan.textContent = 'IDR 0';
        displaySelisih.textContent = 'IDR 0';
        displaySelisih.classList.remove('selisih');
        statusValidasi.textContent = '-';
        statusValidasi.className = 'hasil-nilai';
        totalCredit = 0;
        
        const validasiStatusMessageEl = document.getElementById('validasiStatusMessage');
        validasiStatusMessageEl.style.display = 'none';
        
        hasilTotalCreditIDR.style.display = 'none';
        
        validasiPerhitungan();
        
        showToast("Perhitungan direset!");
    }

    // ===== FUNGSI UMUM =====
    // Fungsi untuk menyalin teks ke clipboard
    function copyText(text) {
        return new Promise((resolve, reject) => {
            if (navigator.clipboard) {
                navigator.clipboard.writeText(text)
                    .then(resolve)
                    .catch(() => {
                        fallbackCopy(text) ? resolve() : reject();
                    });
            } else {
                fallbackCopy(text) ? resolve() : reject();
            }
        });
    }

    function fallbackCopy(text) {
        const textarea = document.createElement('textarea');
        textarea.value = text;
        textarea.style.position = 'fixed';
        document.body.appendChild(textarea);
        textarea.select();

        try {
            return document.execCommand('copy');
        } catch (err) {
            return false;
        } finally {
            document.body.removeChild(textarea);
        }
    }

    // Improved toast notification function
    function showToast(message = "âœ“ Disalin ke clipboard", type = "success") {
        // Set message and type
        toastMessage.textContent = message;

        // Remove previous classes
        toast.classList.remove("error");

        // Add appropriate class for type
        if (type === "error") {
            toast.classList.add("error");
        }

        // Reset animation and show
        toast.style.animation = 'none';
        void toast.offsetHeight; // Trigger reflow
        toast.style.display = 'flex';

        // Apply animation
        toast.style.animation = 'toastSlideIn 0.3s ease-out, toastSlideOut 0.3s ease-in 1.7s forwards';

        // Hide after animation completes
        setTimeout(() => {
            toast.style.display = 'none';
        }, 2000);
    }

    // Inisialisasi jumlah data untuk scatter 6 kolom
    updateDataCount();
});
</script>
</body>
</html>

